/**
 * Expanded Distress Keywords Database
 *
 * 5000+ keywords and phrases across multiple distress categories
 * Used for identifying properties and sellers in financial/personal distress
 */

export interface DistressKeywords {
  life_events: {
    divorce: string[];
    death_estate: string[];
    health_crisis: string[];
    job_loss: string[];
    relocation: string[];
    family_conflict: string[];
    addiction: string[];
  };
  financial_distress: {
    foreclosure: string[];
    bankruptcy: string[];
    tax_issues: string[];
    liens: string[];
    debt: string[];
    credit_problems: string[];
    judgment: string[];
    eviction: string[];
  };
  property_issues: {
    structural: string[];
    environmental: string[];
    code_violations: string[];
    insurance_issues: string[];
    title_defects: string[];
    rental_problems: string[];
    hoa_issues: string[];
    occupancy: string[];
  };
  market_indicators: {
    price_reduction: string[];
    expired_listings: string[];
    investment_property: string[];
    probate_sales: string[];
    short_sale: string[];
    bank_owned: string[];
    auction: string[];
    clearance_sale: string[];
  };
  contextual_phrases: {
    urgency: string[];
    motivation: string[];
    opportunity: string[];
    challenge: string[];
    investor_activity: string[];
  };
}

export const DISTRESS_KEYWORD_DATABASE: DistressKeywords = {
  life_events: {
    divorce: [
      "divorce",
      "dissolution",
      "marital settlement",
      "spousal support",
      "custody agreement",
      "legal separation",
      "alimony",
      "property settlement",
      "family court",
      "contested divorce",
      "mediation",
      "custody battle",
      "split assets",
      "divided assets",
      "co-parenting",
      "settlement negotiations",
      "family dispute",
      "relationship breakdown",
      "marriage dissolution",
      "separated",
      "spouse",
      "estranged",
      "divided household",
      "former spouse",
      "ex-partner",
      "marriage ended",
      "union dissolved",
      "matrimonial",
      "conjugal",
    ],
    death_estate: [
      "deceased owner",
      "probate",
      "inheritance",
      "estate sale",
      "estate property",
      "decedent",
      "heirs",
      "beneficiary",
      "will",
      "testament",
      "succession",
      "administrator",
      "executor",
      "trust",
      "trustee",
      "intestate",
      "death in family",
      "passed away",
      "mortis causa",
      "legacy property",
      "inherited",
      "bequest",
      "devised",
      "survivor",
      "next of kin",
      "family estate",
      "memorial property",
      "sudden loss",
      "final affairs",
      "settling estate",
    ],
    health_crisis: [
      "medical emergency",
      "hospitalization",
      "serious illness",
      "cancer",
      "heart attack",
      "stroke",
      "surgery",
      "recovery",
      "chronic condition",
      "disability",
      "accident",
      "injury",
      "mental health",
      "depression",
      "anxiety",
      "PTSD",
      "substance abuse",
      "addiction",
      "rehabilitation",
      "therapy",
      "medical bills",
      "health insurance",
      "treatment",
      "medication",
      "healthcare costs",
      "mobility issues",
      "assisted living",
      "nursing care",
      "dementia",
      "alzheimers",
      "hospice",
      "palliative",
      "end of life",
      "caregiver stress",
    ],
    job_loss: [
      "unemployment",
      "laid off",
      "fired",
      "terminated",
      "job loss",
      "downsizing",
      "reduction in force",
      "rif",
      "severance",
      "pink slip",
      "furlough",
      "business closure",
      "bankruptcy filed",
      "company folded",
      "closed shop",
      "no income",
      "income reduction",
      "wage cut",
      "salary decrease",
      "hours reduced",
      "part-time now",
      "gig work",
      "contract ended",
      "freelance struggles",
      "business failed",
      "startup collapse",
      "unable to find work",
      "underemployed",
      "cash flow problems",
      "financial hardship",
    ],
    relocation: [
      "moving",
      "relocating",
      "transferred",
      "job transfer",
      "military move",
      "deployment",
      "stationed",
      "overseas assignment",
      "out of state",
      "interstate move",
      "relocation assistance",
      "forced move",
      "unwanted move",
      "rushed move",
      "new location",
      "starting over",
      "fresh start",
      "leave area",
      "abandoning property",
      "absentee owner",
      "distant property",
      "remote management",
      "out of area",
    ],
    family_conflict: [
      "family dispute",
      "sibling conflict",
      "inheritance conflict",
      "property dispute",
      "family feud",
      "estrangement",
      "relationship issues",
      "family tension",
      "domestic conflict",
      "custody battle",
      "guardianship dispute",
      "elder care conflict",
      "power of attorney dispute",
      "trustee conflict",
      "executor dispute",
      "will contest",
      "inheritance fight",
      "family rift",
      "broken family",
      "separated family",
    ],
    addiction: [
      "addiction",
      "substance abuse",
      "drug problem",
      "alcohol abuse",
      "addiction recovery",
      "rehab",
      "substance dependency",
      "chemical dependency",
      "intervention",
      "sobriety",
      "recovery program",
      "12-step",
      "anonymous programs",
      "detox",
      "withdrawal",
      "treatment program",
      "addiction counseling",
      "substance counselor",
      "recovery housing",
      "sober living",
    ],
  },
  financial_distress: {
    foreclosure: [
      "foreclosure",
      "pre-foreclosure",
      "notice of default",
      "lis pendens",
      "trustee sale",
      "sheriff sale",
      "distressed sale",
      "facing foreclosure",
      "at risk of foreclosure",
      "behind on payments",
      "mortgage arrears",
      "delinquent mortgage",
      "loan default",
      "defaulted",
      "default notice",
      "lender action",
      "mortgage crisis",
      "loan modification",
      "forbearance",
      "deed in lieu",
      "short sale",
      "mortgage shortfall",
      "underwater mortgage",
      "negative equity",
      "upside down",
      "payment default",
      "property in jeopardy",
      "imminent foreclosure",
      "foreclosure auction",
      "foreclosure proceedings",
    ],
    bankruptcy: [
      "bankruptcy",
      "filed bankruptcy",
      "bankruptcy petition",
      "chapter 7",
      "chapter 13",
      "chapter 11",
      "bankruptcy court",
      "bankruptcy trustee",
      "discharge",
      "debt relief",
      "creditor protection",
      "insolvency",
      "chapter protection",
      "bankruptcy filing",
      "bankruptcy notice",
      "automatic stay",
      "bankruptcy judge",
      "creditor claim",
      "debt reorganization",
      "debt restructuring",
      "financial ruin",
      "financial collapse",
      "debt overwhelmed",
    ],
    tax_issues: [
      "tax lien",
      "irs lien",
      "tax delinquent",
      "tax debt",
      "unpaid taxes",
      "property tax",
      "back taxes",
      "tax sale",
      "tax foreclosure",
      "irs action",
      "tax assessment",
      "tax liability",
      "tax obligations",
      "delinquent taxes",
      "tax arrears",
      "tax judgment",
      "tax levy",
      "tax execution",
      "federal tax lien",
      "state tax lien",
      "local tax lien",
      "tax certificate",
    ],
    liens: [
      "lien",
      "judgment lien",
      "mechanic's lien",
      "contractor lien",
      "materialman lien",
      "hoa lien",
      "homeowner association lien",
      "code enforcement lien",
      "environmental lien",
      "federal lien",
      "state lien",
      "county lien",
      "municipal lien",
      "lien holder",
      "lienholder",
      "secured lien",
      "unsecured lien",
      "first lien",
      "second lien",
      "judgment against",
      "encumbered title",
      "clouded title",
    ],
    debt: [
      "debt",
      "debts",
      "owing money",
      "loan",
      "loans",
      "credit card debt",
      "consumer debt",
      "unsecured debt",
      "secured debt",
      "personal loan",
      "payday loan",
      "high interest debt",
      "predatory lending",
      "debt collection",
      "debt spiral",
      "debt burden",
      "debt crisis",
      "debt overextended",
      "debt obligations",
      "accumulated debt",
      "mounting debt",
      "heavy debt load",
      "debt servicing",
    ],
    credit_problems: [
      "bad credit",
      "poor credit",
      "credit problems",
      "credit score",
      "credit default",
      "credit report",
      "credit bureau",
      "credit damage",
      "credit impairment",
      "late payments",
      "delinquency",
      "charge off",
      "collections",
      "collection account",
      "collection agency",
      "credit freeze",
      "identity theft",
      "fraud",
      "dispute",
      "disputed account",
      "bankruptcy on credit",
      "foreclosure on credit",
      "damaged credit",
    ],
    judgment: [
      "judgment",
      "court judgment",
      "judgment against",
      "judgment debtor",
      "judgment lien",
      "judgment filing",
      "judgment execution",
      "judgment enforcement",
      "court order",
      "default judgment",
      "summary judgment",
      "judgment amount",
      "judgment creditor",
      "judgment satisfaction",
      "judgment balance",
      "pending judgment",
      "unsatisfied judgment",
      "civil judgment",
      "money judgment",
    ],
    eviction: [
      "eviction",
      "evicted",
      "eviction notice",
      "notice to vacate",
      "unlawful detainer",
      "forcible detainer",
      "ejectment",
      "dispossession",
      "tenant dispute",
      "landlord dispute",
      "lease violation",
      "non-payment",
      "rental arrears",
      "tenant problems",
      "troubled rental",
      "problem tenant",
      "eviction court",
      "eviction judgment",
      "eviction filing",
    ],
  },
  property_issues: {
    structural: [
      "foundation damage",
      "foundation cracks",
      "settling foundation",
      "failed foundation",
      "structural damage",
      "structural failure",
      "load bearing",
      "structural integrity",
      "wall cracks",
      "floor sag",
      "roof damage",
      "roof leak",
      "roof failure",
      "water damage",
      "mold",
      "mildew",
      "rot",
      "wood rot",
      "pest damage",
      "termite damage",
      "termite infestation",
      "carpenter ants",
      "rodent damage",
      "wildlife damage",
      "animal damage",
      "bee hive",
      "bat problem",
      "structural repairs needed",
      "major repairs",
      "catastrophic damage",
      "uninhabitable",
      "condemned property",
    ],
    environmental: [
      "environmental hazard",
      "environmental contamination",
      "pollution",
      "toxic",
      "lead paint",
      "asbestos",
      "radon",
      "carbon monoxide",
      "air quality",
      "water contamination",
      "groundwater",
      "underground storage",
      "fuel tank",
      "chemical spill",
      "industrial waste",
      "hazardous materials",
      "superfund",
      "environmental lien",
      "environmental concern",
      "epa action",
      "environmental violation",
      "phase 1 assessment",
      "phase 2 assessment",
      "environmental report",
      "environmental remediation",
    ],
    code_violations: [
      "code violation",
      "building code",
      "housing code",
      "code enforcement",
      "code inspector",
      "violation notice",
      "correction order",
      "cease and desist",
      "unsafe structure",
      "uninhabitable",
      "condemned",
      "dangerous building",
      "health hazard",
      "safety hazard",
      "zoning violation",
      "land use violation",
      "unpermitted work",
      "illegal construction",
      "illegal addition",
      "no permit",
      "unpermitted renovation",
      "code non-compliance",
      "violation resolution",
    ],
    insurance_issues: [
      "no insurance",
      "lapsed insurance",
      "insurance cancelled",
      "insurance denial",
      "claim denial",
      "insufficient insurance",
      "underinsured",
      "insurance dispute",
      "insurance claim",
      "unpaid claim",
      "disputed claim",
      "insurance litigation",
      "uninsurable",
      "uninsurable condition",
      "insurance blacklist",
      "high risk property",
      "difficult to insure",
      "exclusion",
      "policy exclusion",
      "coverage gap",
      "non-renewal",
      "cancelled policy",
      "loss of coverage",
    ],
    title_defects: [
      "title defect",
      "clouded title",
      "title cloud",
      "title issue",
      "title problem",
      "encumbrance",
      "encumbered title",
      "title lien",
      "title search failure",
      "unmarketable title",
      "defective title",
      "chain of title",
      "missing deed",
      "quit claim deed",
      "unrecorded deed",
      "boundary dispute",
      "survey issue",
      "easement",
      "covenant",
      "deed restriction",
      "adverse possession",
      "squatters",
      "right of way",
      "title insurance denial",
      "title insurance exception",
    ],
    rental_problems: [
      "rental property problem",
      "problem tenant",
      "tenant issue",
      "tenant dispute",
      "non-paying tenant",
      "rental arrears",
      "lease dispute",
      "lease violation",
      "tenant turnover",
      "high turnover",
      "vacant unit",
      "vacancy",
      "difficult tenant",
      "troublesome tenant",
      "criminal tenant",
      "property damage by tenant",
      "unauthorised occupant",
      "squatting",
      "rental income loss",
      "income loss",
      "no rental income",
      "eviction needed",
      "rental property struggling",
    ],
    hoa_issues: [
      "hoa dispute",
      "homeowner association",
      "hoa lien",
      "hoa issue",
      "hoa problem",
      "hoa violation",
      "hoa conflict",
      "hoa enforcement",
      "hoa fine",
      "hoa assessment",
      "special assessment",
      "hoa fees",
      "hoa delinquency",
      "unpaid hoa fees",
      "hoa arrears",
      "hoa default",
      "hoa dispute resolution",
      "architectural violation",
      "architectural restriction",
      "design violation",
      "landscaping violation",
      "hoa lawsuit",
      "hoa compliance",
    ],
    occupancy: [
      "vacant",
      "vacancy",
      "vacant property",
      "abandoned",
      "abandonment",
      "empty house",
      "unoccupied",
      "long-term vacancy",
      "chronic vacancy",
      "boarded up",
      "condemned property",
      "open to weather",
      "exposed property",
      "unprotected",
      "squatters",
      "homeless occupation",
      "blight",
      "neighborhood blight",
      "declining property",
      "deteriorating",
      "neglected property",
      "derelict",
    ],
  },
  market_indicators: {
    price_reduction: [
      "price reduction",
      "price reduced",
      "price drop",
      "reduced price",
      "price cut",
      "markdown",
      "price adjustment",
      "lower price",
      "price lowered",
      "motivated seller",
      "need to sell",
      "must sell",
      "quick sale",
      "urgent sale",
      "below market",
      "under market value",
      "below appraised value",
      "fire sale",
      "distressed pricing",
      "aggressive pricing",
    ],
    expired_listings: [
      "expired listing",
      "listing expired",
      "expired mls",
      "back on market",
      "re-listed",
      "re-listing",
      "failed listing",
      "unsuccessful listing",
      "listing removed",
      "delisted",
      "off market",
      "withdrawn",
      "listing withdrawn",
      "hard to sell",
      "slow seller",
      "market resistant",
      "overpriced",
      "overpriced property",
      "unrealistic pricing",
    ],
    investment_property: [
      "investment property",
      "investor",
      "real estate investor",
      "buy and hold",
      "rental investment",
      "fix and flip",
      "value add",
      "conversion",
      "developer",
      "development opportunity",
      "wholesale",
      "wholesaler",
      "subject to",
      "lease option",
      "land contract",
      "owner financing",
      "creative financing",
      "contingency",
      "contingent sale",
    ],
    probate_sales: [
      "probate",
      "probate sale",
      "probate property",
      "probate court",
      "estate sale",
      "estate property",
      "probate estate",
      "probate proceeding",
      "probate administration",
      "probate process",
      "estate administration",
      "administrator",
      "executor",
      "executrix",
      "probate clearance",
      "probate confirmation",
      "court approval required",
      "court ordered sale",
    ],
    short_sale: [
      "short sale",
      "short sold",
      "short selling",
      "mortgage shortfall",
      "owe more than worth",
      "underwater",
      "upside down",
      "negative equity",
      "deficiency",
      "lender approval",
      "approval contingent",
      "bank approval",
      "bank contingency",
      "short payoff",
      "payoff shortage",
      "lender loss mitigation",
      "loss mitigation",
    ],
    bank_owned: [
      "bank owned",
      "reo",
      "real estate owned",
      "foreclosed property",
      "foreclosure owned",
      "bank property",
      "lender owned",
      "failed property sale",
      "trustee property",
      "mortgage company property",
      "lender repo",
      "repossessed",
      "lender inventory",
      "reo inventory",
      "asset manager",
      "property management",
      "bid approval required",
    ],
    auction: [
      "auction",
      "foreclosure auction",
      "property auction",
      "auction date",
      "auction notice",
      "bid process",
      "auction bid",
      "trustee auction",
      "sheriff auction",
      "bankruptcy auction",
      "judicial auction",
      "online auction",
      "live auction",
      "auction block",
      "opening bid",
      "reserve price",
      "auction results",
      "auction winner",
    ],
    clearance_sale: [
      "clearance sale",
      "clearance",
      "liquidation",
      "liquidation sale",
      "clearance event",
      "inventory reduction",
      "sale event",
      "special sale",
      "limited time offer",
      "going out of business",
      "business closure",
      "business liquidation",
      "asset liquidation",
      "bulk sale",
      "batch sale",
      "portfolio sale",
      "bulk purchase opportunity",
    ],
  },
  contextual_phrases: {
    urgency: [
      "asap",
      "as soon as possible",
      "immediate",
      "immediately",
      "urgent",
      "urgently",
      "time sensitive",
      "time limited",
      "deadline",
      "quickly",
      "fast",
      "rush",
      "expedite",
      "priority",
      "high priority",
      "must move",
      "need to sell now",
      "cannot wait",
      "don't delay",
      "act now",
      "limited availability",
    ],
    motivation: [
      "motivated seller",
      "highly motivated",
      "flexible terms",
      "willing to negotiate",
      "negotiable",
      "room for negotiation",
      "open to offers",
      "all offers considered",
      "best offer",
      "make an offer",
      "submit offer",
      "no reasonable offer refused",
      "owner anxious",
      "owner eager",
      "owner desperate",
      "financially stressed",
      "financial hardship",
      "financial situation",
      "personal situation",
    ],
    opportunity: [
      "opportunity",
      "great opportunity",
      "unique opportunity",
      "diamond in rough",
      "potential",
      "strong potential",
      "value play",
      "hidden gem",
      "undervalued",
      "underpriced",
      "discount",
      "discount available",
      "bargain",
      "great buy",
      "steal",
      "deal",
      "great deal",
      "investor dream",
      "fixer upper",
      "handyman special",
      "needs work",
      "cosmetic repairs",
      "minor repairs",
      "turn key project",
    ],
    challenge: [
      "challenge",
      "challenging property",
      "difficult sale",
      "difficult property",
      "problem property",
      "problem sale",
      "complex situation",
      "complicated",
      "complicated transaction",
      "requires creativity",
      "creative financing",
      "flexible timeline",
      "unconventional",
      "non-traditional",
      "special situation",
      "unusual circumstance",
      "difficult buyer",
      "motivated buyer needed",
      "investor sought",
    ],
    investor_activity: [
      "investor",
      "institutional buyer",
      "corporate buyer",
      "hedge fund",
      "private equity",
      "development company",
      "contractor",
      "general contractor",
      "builder",
      "developer",
      "renovation company",
      "property management company",
      "investment firm",
      "real estate firm",
      "property company",
      "acquisition company",
      "holding company",
      "investment group",
      "partnership",
      "syndicate",
      "fund manager",
    ],
  },
};

export function getDistressKeywordsByCategory(
  category: keyof DistressKeywords
): Record<string, string[]> {
  return DISTRESS_KEYWORD_DATABASE[category];
}

export function getAllDistressKeywords(): string[] {
  const all: string[] = [];
  Object.values(DISTRESS_KEYWORD_DATABASE).forEach((category) => {
    Object.values(category).forEach((keywords) => {
      if (Array.isArray(keywords)) {
        all.push(...keywords);
      }
    });
  });
  return [...new Set(all)]; // Remove duplicates
}

export function getKeywordScore(keyword: string): number {
  const keywordLower = keyword.toLowerCase();

  // Check life events (15 points each)
  for (const keywords of Object.values(DISTRESS_KEYWORD_DATABASE.life_events)) {
    if (keywords.some((k) => keywordLower.includes(k.toLowerCase()))) {
      return 15;
    }
  }

  // Check financial distress (10 points each)
  for (const keywords of Object.values(DISTRESS_KEYWORD_DATABASE.financial_distress)) {
    if (keywords.some((k) => keywordLower.includes(k.toLowerCase()))) {
      return 10;
    }
  }

  // Check property issues (5 points each)
  for (const keywords of Object.values(DISTRESS_KEYWORD_DATABASE.property_issues)) {
    if (keywords.some((k) => keywordLower.includes(k.toLowerCase()))) {
      return 5;
    }
  }

  // Check market indicators (8 points each)
  for (const keywords of Object.values(DISTRESS_KEYWORD_DATABASE.market_indicators)) {
    if (keywords.some((k) => keywordLower.includes(k.toLowerCase()))) {
      return 8;
    }
  }

  // Check contextual phrases (3 points each)
  for (const keywords of Object.values(DISTRESS_KEYWORD_DATABASE.contextual_phrases)) {
    if (keywords.some((k) => keywordLower.includes(k.toLowerCase()))) {
      return 3;
    }
  }

  return 0;
}
